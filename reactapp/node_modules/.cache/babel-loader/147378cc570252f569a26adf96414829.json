{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\floco\\\\Desktop\\\\lacapsule\\\\semaine6\\\\morningnews\\\\part4\\\\backup2\\\\mnpart4\\\\reactapp\\\\src\\\\ScreenHome.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { gsap } from \"gsap\";\nimport './App.css';\nimport { Input, Button } from 'antd';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nfunction ScreenHome(props) {\n  const [toggle, setToggle] = useState(false); ////animation gsap\n\n  const [signUpUsername, setSignUpUsername] = useState('');\n  const [signUpEmail, setSignUpEmail] = useState('');\n  const [signUpPassword, setSignUpPassword] = useState('');\n  const [signInEmail, setSignInEmail] = useState('');\n  const [signInPassword, setSignInPassword] = useState('');\n  const [userExists, setUserExists] = useState(false);\n  const [listErrorsSignin, setErrorsSignin] = useState([]);\n  const [listErrorsSignup, setErrorsSignup] = useState([]); /////////animation gsap\n\n  const changeState = () => {\n    setToggle(!toggle);\n  };\n\n  const cardRef = useRef(null);\n  const cardRefb = useRef(null);\n  useEffect(() => {\n    gsap.to(cardRef.current, {\n      scale: 1.2,\n      rotateX: 360,\n      duration: 1.2\n    });\n    gsap.to(cardRefb.current, {\n      scale: 1.2,\n      rotateX: 360,\n      duration: 1.2\n    });\n    console.log(cardRef);\n  }); //////////////////////////////////////////////////////sign-up\n\n  var handleSubmitSignup = async () => {\n    const signup = await fetch('/sign-up', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `username=${signUpUsername}&email=${signUpEmail}&password=${signUpPassword}`\n    });\n    const signupj = await signup.json();\n\n    if (signupj.result === true) {\n      props.rectok(signupj.token);\n      setUserExists(true);\n    } else {\n      setErrorsSignup(signupj.error);\n    }\n  }; ///////////////////////////////////////////////////////////sign-in\n\n\n  var handleSubmitSignin = async () => {\n    const data = await fetch('/sign-in', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `email=${signInEmail}&password=${signInPassword}`\n    });\n    const body = await data.json();\n\n    if (body.result === true) {\n      props.rectok(body.token);\n      console.log(\"RECTOK\", body.token);\n      setUserExists(true);\n    } else {\n      setErrorsSignin(body.error);\n    }\n  };\n\n  if (userExists) {\n    return React.createElement(Redirect, {\n      to: \"/screensource\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    });\n  }\n\n  var tabErrorsSignin = listErrorsSignin.map((error, i) => {\n    return React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, error);\n  });\n  var tabErrorsSignup = listErrorsSignup.map((error, i) => {\n    return React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, error);\n  });\n  return React.createElement(\"div\", {\n    className: \"Login-page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Sign\",\n    onClick: changeState,\n    ref: cardRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Input, {\n    onChange: e => setSignInEmail(e.target.value),\n    className: \"Login-input\",\n    placeholder: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(Input.Password, {\n    onChange: e => setSignInPassword(e.target.value),\n    className: \"Login-input\",\n    placeholder: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }), tabErrorsSignin, React.createElement(Button, {\n    onClick: () => handleSubmitSignin(),\n    style: {\n      width: '80px'\n    },\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Sign-in\")), React.createElement(\"div\", {\n    className: \"Sign\",\n    onClick: changeState,\n    ref: cardRefb,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(Input, {\n    onChange: e => setSignUpUsername(e.target.value),\n    className: \"Login-input\",\n    placeholder: \"username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(Input, {\n    onChange: e => setSignUpEmail(e.target.value),\n    className: \"Login-input\",\n    placeholder: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), React.createElement(Input.Password, {\n    onChange: e => setSignUpPassword(e.target.value),\n    className: \"Login-input\",\n    placeholder: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), tabErrorsSignup, React.createElement(Button, {\n    onClick: () => handleSubmitSignup(),\n    style: {\n      width: '80px'\n    },\n    type: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Sign-up\")));\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    rectok: function (token) {\n      dispatch({\n        type: \"tokenok\",\n        token: token\n      });\n      console.log(\"TOKEN/////\", token);\n    }\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(ScreenHome);","map":{"version":3,"sources":["C:/Users/floco/Desktop/lacapsule/semaine6/morningnews/part4/backup2/mnpart4/reactapp/src/ScreenHome.js"],"names":["React","useState","useEffect","useRef","gsap","Input","Button","Redirect","connect","ScreenHome","props","toggle","setToggle","signUpUsername","setSignUpUsername","signUpEmail","setSignUpEmail","signUpPassword","setSignUpPassword","signInEmail","setSignInEmail","signInPassword","setSignInPassword","userExists","setUserExists","listErrorsSignin","setErrorsSignin","listErrorsSignup","setErrorsSignup","changeState","cardRef","cardRefb","to","current","scale","rotateX","duration","console","log","handleSubmitSignup","signup","fetch","method","headers","body","signupj","json","result","rectok","token","error","handleSubmitSignin","data","tabErrorsSignin","map","i","tabErrorsSignup","e","target","value","width","mapDispatchToProps","dispatch","type"],"mappings":"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","sourcesContent":["\r\nimport React, {useState, useEffect, useRef} from 'react';\r\nimport {gsap} from \"gsap\";\r\nimport './App.css';\r\nimport {Input,Button} from 'antd';\r\nimport {Redirect} from 'react-router-dom'\r\nimport {connect} from 'react-redux';\r\n\r\nfunction ScreenHome(props) {\r\n  const [toggle, setToggle] = useState(false)////animation gsap\r\n  const [signUpUsername, setSignUpUsername] = useState('')\r\n  const [signUpEmail, setSignUpEmail] = useState('')\r\n  const [signUpPassword, setSignUpPassword] = useState('')\r\n  const [signInEmail, setSignInEmail] = useState('')\r\n  const [signInPassword, setSignInPassword] = useState('')\r\n  const [userExists, setUserExists] = useState(false)\r\n  const [listErrorsSignin, setErrorsSignin] = useState([])\r\n  const [listErrorsSignup, setErrorsSignup] = useState([])\r\n\r\n  /////////animation gsap\r\n  const changeState = () => {\r\n    setToggle(!toggle)\r\n  };\r\n\r\n  const cardRef = useRef(null);\r\n  const cardRefb = useRef(null)\r\n  useEffect(() => {\r\n    gsap.to(cardRef.current, {\r\n      scale: 1.2,\r\n      rotateX: 360,\r\n      duration: 1.2\r\n    }) \r\n    gsap.to(cardRefb.current, {\r\n      scale: 1.2,\r\n      rotateX: 360,\r\n      duration: 1.2\r\n    })\r\n    console.log(cardRef)\r\n  })\r\n//////////////////////////////////////////////////////sign-up\r\n  var handleSubmitSignup = async () => {\r\n    const signup = await fetch('/sign-up', {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      body: `username=${signUpUsername}&email=${signUpEmail}&password=${signUpPassword}`\r\n    })\r\n    const signupj = await signup.json()\r\n    if(signupj.result === true){\r\n      props.rectok(signupj.token);\r\n      setUserExists(true)\r\n    } else {\r\n      setErrorsSignup(signupj.error);\r\n    }\r\n  }\r\n///////////////////////////////////////////////////////////sign-in\r\n  var handleSubmitSignin = async () => {\r\n    const data = await fetch('/sign-in', {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n      body: `email=${signInEmail}&password=${signInPassword}`\r\n    })\r\n    const body = await data.json()\r\n    if(body.result === true){\r\n      props.rectok(body.token)\r\n      console.log(\"RECTOK\",body.token)\r\n      setUserExists(true)\r\n    }  else {\r\n      setErrorsSignin(body.error)\r\n    }\r\n  }\r\n\r\n  if(userExists){\r\n    return <Redirect to='/screensource' />\r\n  }\r\n  var tabErrorsSignin = listErrorsSignin.map((error,i) => {\r\n    return(<p>{error}</p>)\r\n  })\r\n\r\n  var tabErrorsSignup = listErrorsSignup.map((error,i) => {\r\n    return(<p>{error}</p>)\r\n  })\r\n\r\n  \r\n\r\n  return (\r\n    <div className=\"Login-page\" >\r\n\r\n          {/* SIGN-IN */}\r\n\r\n          <div className=\"Sign\" onClick={changeState}\r\n            ref={cardRef}>\r\n                  \r\n            <Input onChange={(e) => setSignInEmail(e.target.value)} className=\"Login-input\" placeholder=\"email\" />\r\n\r\n            <Input.Password onChange={(e) => setSignInPassword(e.target.value)} className=\"Login-input\" placeholder=\"password\" />\r\n            \r\n            {tabErrorsSignin}\r\n\r\n            <Button onClick={() => handleSubmitSignin()}  style={{width:'80px'}} type=\"primary\">Sign-in</Button>\r\n\r\n          </div>\r\n\r\n          {/* SIGN-UP */}\r\n          <div className=\"Sign\" onClick={changeState}\r\n            ref={cardRefb}>\r\n                  \r\n            <Input onChange={(e) => setSignUpUsername(e.target.value)} className=\"Login-input\" placeholder=\"username\" />\r\n\r\n            <Input onChange={(e) => setSignUpEmail(e.target.value)} className=\"Login-input\" placeholder=\"email\" />\r\n\r\n            <Input.Password onChange={(e) => setSignUpPassword(e.target.value)} className=\"Login-input\" placeholder=\"password\" />\r\n      \r\n            {tabErrorsSignup}\r\n\r\n            <Button onClick={() => handleSubmitSignup()} style={{width:'80px'}} type=\"primary\">Sign-up</Button>\r\n\r\n          </div>\r\n\r\n      </div>\r\n  );\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    rectok: function (token) {\r\n      dispatch({ type: \"tokenok\", token: token });\r\n      console.log(\"TOKEN/////\",token);\r\n    },\r\n  };\r\n}\r\nexport default connect(null, mapDispatchToProps)(ScreenHome);"]},"metadata":{},"sourceType":"module"}